jQuery(document).ready(function(e){var t;e(".job_listings").on("update_results",function(n,r,i){t&&t.abort();var s=e(this),o=s.find(".job_filters"),u=s.find(".showing_jobs"),a=s.find(".job_listings"),f=s.data("per_page"),l=s.data("orderby"),c=s.data("order");if(i)e(".load_more_jobs",s).addClass("loading");else{e(a).addClass("loading");e("li.job_listing",a).css("visibility","hidden")}if(s.data("show_filters")){var h=new Array;e(':input[name="filter_job_type[]"]:checked, :input[name="filter_job_type[]"][type="hidden"]',o).each(function(){h.push(e(this).val())});var p=o.find(":input[name^=search_categories], :input[name^=search_categories]").map(function(){return e(this).val()}).get(),d="",v="",m=o.find(":input[name=search_keywords]"),g=o.find(":input[name=search_location]");m.val()!=m.attr("placeholder")&&(d=m.val());g.val()!=g.attr("placeholder")&&(v=g.val());var y={action:"job_manager_get_listings",search_keywords:d,search_location:v,search_categories:p,filter_job_type:h,per_page:f,orderby:l,order:c,page:r,form_data:o.serialize()}}else var y={action:"job_manager_get_listings",search_categories:s.data("categories").split(","),search_keywords:s.data("keywords"),search_location:s.data("location"),per_page:f,orderby:l,order:c,page:r};t=e.ajax({type:"POST",url:job_manager_ajax_filters.ajax_url,data:y,success:function(t){if(t)try{t.indexOf("<!--WPJM-->")>=0&&(t=t.split("<!--WPJM-->")[1]);t.indexOf("<!--WPJM_END-->")>=0&&(t=t.split("<!--WPJM_END-->")[0]);var n=e.parseJSON(t);n.showing?e(u).show().html("").append("<span>"+n.showing+"</span>"+n.showing_links):e(u).hide();n.html&&(i?e(a).append(n.html):e(a).html(n.html));!n.found_jobs||n.max_num_pages==r?e(".load_more_jobs",s).hide():e(".load_more_jobs",s).show().data("page",r);e(a).removeClass("loading");e(".load_more_jobs",s).removeClass("loading");e("li.job_listing",a).css("visibility","visible")}catch(o){console.log(o)}}})});e("#search_keywords, #search_location, .job_types input, #search_categories").change(function(){var t=e(this).closest("div.job_listings");t.trigger("update_results",[1,!1])}).change();e(".job_filters").on("click",".reset",function(){var t=e(this).closest("div.job_listings"),n=e(this).closest("form");n.find(":input[name=search_keywords]").val("");n.find(":input[name=search_location]").val("");n.find(":input[name^=search_categories]").val(0);e(':input[name="filter_job_type[]"]',n).attr("checked","checked");t.trigger("reset");t.trigger("update_results",[1,!1]);return!1});e(".load_more_jobs").click(function(){var t=e(this).closest("div.job_listings"),n=e(this).data("page");n?n=parseInt(n):n=1;e(this).data("page",n+1);t.trigger("update_results",[n+1,!0]);return!1})});